
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Specification Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code-captions/code-captions.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../REFERENCES.html" />
    
    
    <link rel="prev" href="../" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Front matter
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2" data-path="./">
            
                <a href="./">
            
                    
                    Specification
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../REFERENCES.html">
            
                <a href="../REFERENCES.html">
            
                    
                    References
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Specification</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="1-introduction">1. Introduction</h1>
<h2 id="11-purpose">1.1 Purpose</h2>
<p>The Oxford Common File Layout (<a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a>) is a file-and-folder hierarchy designed to promote long-term, application-independent file management best practices within digital repositories.</p>
<p>This specification covers two principle areas:</p>
<ol>
<li>Structure. A normative specification of the nature of an <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Object (the &quot;object-at-rest&quot;);</li>
<li>Client Behaviours. A set of recommendations for how <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Objects should be acted upon (the &quot;object-in-motion&quot;)</li>
</ol>
<h2 id="12-need">1.2 Need</h2>
<p>The <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> initiative arose from a need to have well-defined application-independent file management within digital repositories. </p>
<p>A general observation is that the contents of a digital repository -- that is, the digital files and metadata that an institution might wish to manage -- are largely stable. Once content has been accessioned, it is unlikely to change significantly over its lifetime. This is in contrast to the software applications that manage these contents, which are ephemeral, requiring constant updating and replacement. Thus, transitions between application-specific methods of file management to support software upgrades and replacement cycles can be seen as unnecessary and risky change, changing the long-term stable objects to support the short-term, ephemeral software.</p>
<p>By providing a specification for the file-and-folder layout on disk, the <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> is an attempt at reducing, or even eliminating, the need for these transitions. As an application-independent specification, conforming applications will natively &apos;understand&apos; the underlying file structure without needing to first transition these contents to their own format.</p>
<h2 id="13-scope">1.3 Scope</h2>
<h2 id="14-terminology">1.4 Terminology</h2>
<h1 id="2-structure">2. Structure</h1>
<h2 id="21-the-ocfl-object">2.1 The OCFL Object</h2>
<p>An <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Object is a base directory that contains a set of required and optional files and folders.</p>
<h2 id="22-basic-structure">2.2 Basic Structure</h2>
<div class="code-caption"><span class="code-caption-text">A basic <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Object Structure</span><pre><code>&lt;base-directory&gt;
&#x251C;&#x2500;&#x2500; 0=ocfl_object_1.0
&#x251C;&#x2500;&#x2500; inventory.jsonld
&#x251C;&#x2500;&#x2500; logs
&#x2502;   &#x2514;&#x2500;&#x2500; .keep
&#x2514;&#x2500;&#x2500; v1
    &#x2514;&#x2500;&#x2500; .keep
</code></pre></div><h2 id="23-specifications-conformance">2.3 Specifications Conformance</h2>
<p>The <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> specification will change over time, and these changes will be published as versioned updates. <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Objects are self-describing, and provide an indication of the version of the specification to which they should conform.</p>
<h3 id="231-ocfl-version-declaration">2.3.1 OCFL Version declaration</h3>
<p>The version declaration MUST be an empty file in the base directory of the object giving the <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> object version in the filename. This MUST be formatted with a leading zero-equals (0=), &apos;ocfl_object&apos;, and the version number. A regular expression intended to validate this name is provided below.</p>
<div class="code-caption"><span class="code-caption-text">Example filename as version declaration</span><pre><code>0=ocfl_object_1.0
</code></pre></div><div class="code-caption"><span class="code-caption-text"><a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Version File Regex for validation</span><pre><code>^0=ocfl_object_[\d]+.[\d]+$
</code></pre></div><h2 id="24-object-versioning">2.4 Object Versioning</h2>
<p><a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Objects are versioned. They provide object versioning through a combination of version directories and an <code>inventory.jsonld</code> file, which describes the contents of each version.</p>
<p><a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Objects are &apos;forward-delta&apos; versioned [REF]. The original structure of the object is contained in the first version. Later versions of the object will store only the content that is changed from the previous versions. Reconstructing the latest version of the object means constructing the current contents of the object through all previous versions.</p>
<p>The <code>inventory.jsonld</code> tracks all known files in the <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Object, along with a SHA512 digest of that object&apos;s contents. Version information is tracked in the <code>inventory.jsonld</code> file in a list of digests for the files that are part of a given version. </p>
<p>Getting a list of the files from that object for a particular version is done with the following steps:</p>
<ol>
<li>Read the <code>inventory.jsonld</code> file for the list of SHA512 digests for a given version;</li>
<li>Find those digests listed in the <code>manifest</code> section. This will provide a list of filepaths within the <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> object.</li>
<li>Deliver the object as a list of those filepaths.</li>
</ol>
<p>The most recent version of an object may be referred to as the &apos;HEAD&apos;, following the conventions of version control software.</p>
<h3 id="xxx-version-immutability">X.X.X Version Immutability</h3>
<p>An <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Object Version is immutable.</p>
<h4 id="xxxx-exceptional-circumstances">X.X.X.X Exceptional Circumstances</h4>
<p>In some exceptional circumstances, digital content may need to be deaccessioned from an <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> object. This should be considered an act of destruction, and should not be part of day-to-date operations. Cases where this may be permissible include exposure of sensitive personal information (e.g., medical records), or hosting contents for which the institution has no rights (e.g., copyright infringement).</p>
<p>The forward-versioning scheme used in <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> makes file deletion difficult, as the most recent version of the object depends on all previous versions. Permanently removing files from previous versions may cause problems in ensuring the object&apos;s integrity.</p>
<p>In the case where only some files within the object are being deaccessioned, a full version history rewrite should be performed. This might consist of:</p>
<ol>
<li>Identify all files in the current version of the <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Object, copying them to a temporary space.</li>
<li>Delete all versions from the <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Object, and reset the object to version 1.</li>
<li>Copy only the non-offending files back to the version 1 folder.</li>
<li>Proceed as if the object were newly accessioned (e.g., populate inventory files with SHA512 digests, etc.)</li>
</ol>
<p>Depending on when in the object&apos;s history the offending content was accessioned, it may also be possible to &apos;roll back&apos; an object&apos;s history to the version prior, and reconstruct the object from there. But implementers should be aware that this would still mean losing the object&apos;s history past that point.</p>
<p>It is NOT permissible for an <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Client to provide support for &apos;excising&apos; files from an object, as this may have unintended consequences. For example, excising a file from a version folder containing only that file would lead to an empty version folder, which is not permitted.</p>
<h3 id="xxx-version-folders">X.X.X Version Folders</h3>
<h4 id="xxxx-version-folder-naming">X.X.X.X Version Folder Naming</h4>
<p>Version folders MUST be numbered with whole numbers, and MUST start with the &apos;v&apos; prefix. There are no leading zeros on a version folder. Implementers should be aware that this may cause problems with alphanumeric sorting of folders in some systems. (The alternative is to zero-pad the version numbers, but this artificially limits the number of versions that could be tracked.)</p>
<h4 id="xxxx-version-folder-contents">X.X.X.X Version Folder Contents</h4>
<p>The contents of version folders is opaque to the <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> specifications, and there is no defined file or folder hierachy within a version folder. Implementers are free to use local conventions, or this may form part of a complementary specification.</p>
<p>The only exception to this is that a copy of the <code>inventory.jsonld</code> file MUST be placed in the root of a version folder as a record of the state of the object at that version. This only applies when that folder no longer represents the most recent version of the object.</p>
<h4 id="xxxx-empty-version-folders">X.X.X.X Empty Version Folders</h4>
<p>Empty version folders are not permitted. This implies, also, that an <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Object is non-conformant to the specification if it does not at least have one version.</p>
<h3 id="242-inventory">2.4.2 Inventory</h3>
<h4 id="xxxx-inventoryjsonld">X.X.X.X inventory.jsonld</h4>
<p>An <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Object MUST have a file called <code>inventory.jsonld</code> in the base directory.</p>
<h4 id="xxxx-use-of-json-ld">X.X.X.X Use of JSON-LD</h4>
<p>The <code>inventory.jsonld</code> file should conform to the <a href="https://json-ld.org/spec/latest/json-ld/" target="_blank">JSON-LD 1.1 specification</a>. JSON-LD was chosen as it is both easily processable by non-LD-aware clients, while providing a self-describing context for <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> inventories.</p>
<h4 id="xxxx-sha512-digests">X.X.X.X SHA512 Digests</h4>
<p>All digests in <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> objects MUST be SHA512. Truncated forms are NOT acceptable.</p>
<h4 id="xxxx-inventory-file-versioning">X.X.X.X Inventory File Versioning</h4>
<p>Inventory files in the root of the <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Object MUST represent the most recent state of the object. Copies of the previous state of the inventory file MUST be kept in the root of the folder of that previous version.</p>
<p>An <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Object at version 2 has a new file added, thus bringing it to version 3. A copy of the <code>inventory.jsonld</code> file is created in the root of the <code>v2</code> folder. A modified version of the <code>inventory.jsonld</code> is created, and contains a SHA512 digest of both the new file being added, and of the previous inventory now stored in the <code>v2</code> folder.</p>
<h4 id="xxxx-structure-of-the-inventory-file">X.X.X.X Structure of the Inventory File</h4>
<p>The <code>inventory.jsonld</code> has the following structure.</p>
<ol>
<li>It MUST contain a &apos;@context&apos; key, and the value of this MUST be &quot;<a href="https://ocfl.org/v1.0/" target="_blank">https://ocfl.org/v1.0/</a>&quot;</li>
<li>It MUST contain a &apos;type&apos; key, and the value of this MUST be &apos;<a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">ocfl</a>:Object&apos;.</li>
<li>It MUST contain an &apos;id&apos; key, and the value of this MUST be a URI. 
 3a. This URI MAY be a URN, e.g., <code>urn:uuid:...</code></li>
<li>It MUST contain a &apos;manifest&apos; key, which MUST be a JSON Object.</li>
<li>It MUST contain a &apos;versions&apos; key, which MUST be an Array.</li>
</ol>
<p>Within the <code>versions</code> array are Version objects. These have the following structure:</p>
<ol>
<li>It MUST contain a &apos;type&apos; key, and the value of this MUST be &apos;<a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">ocfl</a>:Version&apos;.</li>
<li>It MUST contain a &apos;created&apos; key containing the date in ISO 8601 &quot;Combined Date and Time&quot; format</li>
<li>It MUST contain a &apos;members&apos; key, which MUST be an Array.</li>
<li>It MUST contain an &apos;id&apos; key uniquely identifying this version within this object. By convention this MAY be the string corresponding to the folder name for this version, e.g., &apos;v1&apos;, &apos;v2&apos;, etc.</li>
<li>It MAY contain a &apos;message&apos; key, to store a short description of this version.</li>
<li>It MAY contain a &apos;client&apos; key, where a record may be kept of a software library that created this version.</li>
<li>It MAY contain a &apos;user&apos; key, which MUST be a JSON Object containing a person&apos;s name and e-mail address as a record of responsibility.</li>
</ol>
<h2 id="2x-action-logging">2.X Action Logging</h2>
<p><a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Objects support digital content monitoring by providing a location in which logging information about this object may be stored. This logging information is stored in the <code>logs</code> directory in the base directory of the <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> Object.</p>
<h3 id="2xx-structure-of-logs-directory">2.X.X Structure of Logs Directory</h3>
<p>There is no defined structure for the logging directory.</p>
<h3 id="2xx-logged-events">2.X.X Logged Events</h3>
<p>The <a href="../GLOSSARY.html#ocfl" class="glossary-term" title="The Oxford Common File Layout.">OCFL</a> specification has no opinion on what might be considered a &apos;loggable&apos; event. Some implementers may wish to maintain logs only when an object has changed, while others may wish to note every time an object was checked, regardless of if it changed.</p>
<h3 id="2xx-log-format">2.X.X Log Format</h3>
<p>No particular log file format is specified. Implementers may wish to consider complementary specifications like <a href="../GLOSSARY.html#premis" class="glossary-term" title="PREMIS definition and specification. See: PREMIS Specification">PREMIS</a> or PROV-O for capturing loggable events.</p>
<h3 id="2xx-logs-and-versions">2.X.X Logs and Versions</h3>
<p>Additions to the logs directory are NOT versionable events. A version of the object MUST NOT be created if the only action is to add a record to the logs directory.</p>
<h1 id="3-client-behaviours">3. Client Behaviours</h1>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../" class="navigation navigation-prev " aria-label="Previous page: Front matter">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../REFERENCES.html" class="navigation navigation-next " aria-label="Next page: References">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Specification","level":"1.2","depth":1,"next":{"title":"References","level":"1.3","depth":1,"path":"REFERENCES.md","ref":"REFERENCES.md","articles":[]},"previous":{"title":"Front matter","level":"1.1","depth":1,"path":"README.md","ref":"README.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["anchorjs","code-captions"],"pluginsConfig":{"anchorjs":{"selector":"h2,h3,h4,h5","placement":"right","visible":"hover","truncate":64,"ariaLabel":"Anchor"},"code-captions":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"specification/README.md","mtime":"2018-05-07T17:51:04.452Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-05-07T17:52:36.083Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

